<div nz-col nzSpan="22" nzOffset="1">
  <div nz-col style="margin-bottom: 30px; margin-top: 50px;">
    <button
      nz-button
      (click)="create()"
      nzType="primary"
      [disabled]="displayCrudModal"
      nzSize="default"
    >
      Add Indicator
    </button>
    <nz-input-group style="margin-top: 5px;" nzSearch [nzAddOnAfter]="suffixIconButton">
      <input type="text" nz-input placeholder="Search for indicator by name" [(ngModel)]="filters.indicatorName"/>
    </nz-input-group>
    <ng-template #suffixIconButton>
      <button nz-button nzType="primary" nzSearch (click)="fetchByFilters()"><i nz-icon nzType="search"></i></button>
    </ng-template>
  </div>

  <nz-table
    #indicators
    nzShowSizeChanger
    nzBordered
    [nzData]="indicatorList"
    [nzFrontPagination]="false"
    [nzLoading]="isLoading"
    [nzTotal]="totalRowCount"
    [(nzPageIndex)]="page"
    [(nzPageSize)]="pageSize"
    (nzPageSizeChange)="search(true, false)"
    (nzPageIndexChange)="search(false, false)"
    nzSize="small"
  >
    <thead>
    <tr>
      <th>ID</th>
      <th nzShowFilter [nzFilters]="crsCodeFilter" (nzFilterChange)="addFilter('crsCode', $event)">CRS Code</th>
      <th>Data Source</th>
      <th>Description</th>
      <th>Disaggregation</th>
      <th>Keywords</th>
      <th>Name</th>
      <th nzShowFilter [nzFilters]="sdgCodeFilter" (nzFilterChange)="addFilter('sdgCode', $event)">SDG Code</th>
      <th nzShowFilter [nzFilters]="sourceFilter" (nzFilterChange)="addFilter('source', $event)">Source</th>
      <th>Source Verification</th>
      <th nzShowFilter [nzFilters]="sectorFilter" (nzFilterChange)="addFilter('sector', $event)">Sector</th>
      <th nzShowFilter [nzFilters]="levelFilter" (nzFilterChange)="addFilter('levelIds', $event)">Level</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let ind of indicators.data">
      <td>{{ind.id}}</td>
      <td>{{printArray(ind.crsCode, 'name')}}</td>
      <td>{{ind.dataSource}}</td>
      <td>{{ind.description}}</td>
      <td>{{ind.disaggregation}}</td>
      <td>{{ind.keywords}}</td>
      <td>{{ind.name}}</td>
      <td>{{printArray(ind.sdgCode, 'name')}}</td>
      <td>{{printArray(ind.source, 'name')}}</td>
      <td>{{ind.sourceVerification}}</td>
      <td>{{ind.sector}}</td>
      <td>{{ind.level.name}}</td>
      <td>
        <div>
          <div nz-row><a (click)="edit(ind)">Edit</a></div>
          <div nz-row><a (click)="delete(ind)">Remove</a></div>
        </div>
      </td>
    </tr>
    </tbody>
  </nz-table>
</div>
<app-crud-indicator
  (hideCrudModal)="hideCrudModal($event)"
  (indicatorAdded)="refreshIndicatorList()"
  (indicatorDeleted)="refreshIndicatorList()"
  (indicatorUpdated)="refreshIndicatorList()"
  [operation]="operation"
  [indicatorForOperation]="indicator"
  [displayCrudModal]="displayCrudModal"
>
</app-crud-indicator>
